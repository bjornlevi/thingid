{% extends "base.html" %}
{% block content %}
<section class="hero">
  <div>
    <p class="eyebrow">Mæting</p>
    <h1>{{ member.leaf_nafn }}</h1>
    <p class="lede">Sundurliðun á nefndarfundum fyrir {{ current_lthing }}. löggjafarþing.</p>
  </div>
  <div class="hero-meta">
    {% if pct is not none %}
      <div class="pill neutral">{{ "%.1f"|format(pct) }}%</div>
    {% endif %}
    <div class="pill muted">{{ attended }}/{{ total }}</div>
  </div>
</section>

<section class="stack">
  {% if records %}
  <ul class="list">
    {% for rec in records %}
      <li class="panel">
        <div class="panel-head">
          <div>
            <h3>{{ rec.nefnd_name or ("Nefnd " ~ rec.nefnd_id) }} - fundur {{ rec.meeting_num }}
              {% if rec.fundargerd %}
                <a class="pill link" href="{{ rec.fundargerd }}" target="_blank" rel="noreferrer">Fundargerð</a>
              {% endif %}
            </h3>
          </div>
          <div class="text-right">
            <div class="muted">{{ rec.time.strftime("%Y-%m-%d %H:%M") }}</div>
            <div style="color: {{ '#f97316' if rec.is_late else ('#4ade80' if rec.status == 'attended' else '#f87171') }};">
              Staða: {{ "Seint" if rec.is_late else ("Mætti" if rec.status == "attended" else "Mætti ekki") }}
            </div>
          </div>
        </div>
        <div class="panel-body">
          <p class="muted">
            Mæting:
            {% if rec.arrival %}
              <span style="color: {{ '#f97316' if rec.is_late else '#9ca3af' }};">{{ rec.arrival.strftime("%H:%M") }}</span>
            {% elif rec.absence_reason %}
              <span style="color: #f87171;">{{ rec.absence_reason }}</span>
            {% else %}
              —
            {% endif %}
          </p>
          {% if rec.leave_note %}
            <p class="muted">{{ rec.leave_note }}</p>
          {% endif %}
        </div>
      </li>
    {% endfor %}
  </ul>
  {% else %}
    <p class="muted">Engin fundargögn fundust fyrir þennan þingmann.</p>
  {% endif %}
</section>
{% endblock %}
